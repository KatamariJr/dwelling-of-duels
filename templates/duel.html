{% extends "base.html" %}

{% block title %}{{ prettify_duel(objs[0]) }}{% endblock %}

{% block winners %}
  {% import "winners.html" as winners %}

  {{ winners.render(objs) }}
{% endblock %}

{% block content %}

<h1 class="ctitle">{{ prettify_duel(objs[0]) }}</h1>

<div class="hline-r"></div>

<div class="centered">
  <img src="/static/img/15-06-Jazz.jpg"/>
</div>

<br />

{% if voting and objs[0].duel == latest_duel %}
  <table class="table" data-sortable>
    <thead>
      <tr>
        <th>Song</th>
        <th>Game(s)</th>
      </tr>
    </thead>
    <tbody>
    {% for obj in objs %}
      <tr>
        <td>{{ get_song_link(obj) }}</td>
        <td>{{ get_game_link(obj) }}</td>
      </tr>
    {% endfor %}
    </tbody>
  </table>
{% else %}
  <table class="table" data-sortable>
    <thead>
      <tr>
        <th data-sorted="true" data-sorted-direction="ascending">Rank</th>
        <th>Song</th>
        <th>Artist(s)</th>
        <th>Game(s)</th>
      </tr>
    </thead>
    <tbody>
    {% for obj in objs %}
      <tr>
        <td {{ get_rank_sort_value(obj) }}>{{ get_rank(obj, false) }}</td>
        <td>{{ get_song_link(obj) }}</td>
        <td>{{ get_artist_link(obj) }}</td>
        <td>{{ get_game_link(obj) }}</td>
      </tr>
    {% endfor %}
    </tbody>
  </table>
{% endif %}

<br />

<h1 class="ctitle">Links</h1>

<div class="hline-r"></div>

<ul>
  <li>
    <a href="/dodarchive/{{ objs[0].month_dir }}/{{ objs[0].month_dir }}-archive.zip">ZIP Archive of Songs</a>
  </li>
  <li>
    <a href="/dodarchive/{{ objs[0].month_dir }}/{{ objs[0].month_dir }}-listening-party-log.txt">Listening Party Log</a>
  </li>
  <li>
    <a href="https://www.youtube.com/">YouTube Playlist</a>
  </li>
</ul>

{% if voting and objs[0].duel == latest_duel %}
  <br />

  <h1 class="ctitle">Voting</h1>

  <div class="hline-r"></div>

  {% for obj in objs %}
    <h4>{{ obj.title }}</h4>

    <div class="voting-slider" data-song="{{ obj.games|join(', ') }} - {{ obj.title }}"></div>

    <br />
    <br />
  {% endfor %}

  <textarea id="voting-result" rows="{{ objs|length }}"></textarea>
{% endif %}

{% endblock %}


{% block extra_js_includes %}
  {% if voting and objs[0].duel == latest_duel %}
    <script type="text/javascript" src="/static/js/jquery.js"></script>
    <script type="text/javascript" src="/static/js/slider.js"></script>
    <script type="text/javascript" src="/static/js/voting.js"></script>
  {% endif %}
{% endblock %}
